{% extends "base.html" %}
{% block title %}New Post â€” AI Content Engine{% endblock %}
{% block content %}
<h1>Create New Post</h1>
<p class="meta">Provide a URL or text description and we'll generate LinkedIn + Medium drafts for you.</p>

{% if error %}
<div class="alert alert-error">{{ error }}</div>
{% endif %}

<form method="post" action="/create" class="create-form">
    <div class="tab-switcher">
        <button type="button" class="tab-btn active" onclick="switchTab('url')">From URL</button>
        <button type="button" class="tab-btn" onclick="switchTab('text')">From Text</button>
    </div>

    <input type="hidden" name="input_type" id="input_type" value="url">

    <div id="tab-url" class="tab-content active">
        <div class="form-group">
            <label for="url">Web URL</label>
            <input type="url" name="url" id="url" placeholder="https://example.com/article-about-ai"
                   class="form-input">
            <p class="hint">Paste a link to an article, blog post, or announcement.</p>
        </div>
    </div>

    <div id="tab-text" class="tab-content">
        <div class="form-group">
            <label for="title">Title (optional)</label>
            <input type="text" name="title" id="title" placeholder="e.g., New AI Agent Framework Released"
                   class="form-input">
        </div>
        <div class="form-group">
            <label for="text">Content / Description</label>
            <textarea name="text" id="text" rows="8" class="editor-textarea"
                      placeholder="Describe the topic, paste key points, or write a rough draft..."></textarea>
            <p class="hint">The more detail you provide, the better the generated posts will be.</p>
        </div>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary" id="submit-btn">Generate Drafts</button>
        <a href="/" class="btn btn-secondary">Cancel</a>
    </div>
</form>

<script>
function switchTab(tab) {
    // Update hidden field
    document.getElementById('input_type').value = tab;

    // Toggle tab buttons
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');

    // Toggle tab content
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.getElementById('tab-' + tab).classList.add('active');
}

// Show loading state on submit
document.querySelector('.create-form').addEventListener('submit', function() {
    var btn = document.getElementById('submit-btn');
    btn.textContent = 'Generating...';
    btn.disabled = true;
});
</script>
{% endblock %}
