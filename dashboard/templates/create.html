{% extends "base.html" %}
{% block title %}New Post â€” AI Content Engine{% endblock %}
{% block page_title %}Create New Post{% endblock %}

{% block content %}
<p class="hint" style="margin-bottom:1.5rem;font-size:0.88rem;">Provide a URL or text description and we'll generate LinkedIn + Medium drafts for you.</p>

{% if error %}
<div class="alert alert-error">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
    {{ error }}
</div>
{% endif %}

<form method="post" action="/create" class="create-form">
    <div class="tab-switcher">
        <button type="button" class="tab-btn active" onclick="switchTab('url')">From URL</button>
        <button type="button" class="tab-btn" onclick="switchTab('text')">From Text</button>
    </div>

    <input type="hidden" name="input_type" id="input_type" value="url">

    <div id="tab-url" class="tab-content active">
        <div class="form-group">
            <label for="url">Web URL</label>
            <input type="url" name="url" id="url" placeholder="https://example.com/article-about-ai"
                   class="form-input">
            <p class="hint">Paste a link to an article, blog post, or announcement.</p>
        </div>
    </div>

    <div id="tab-text" class="tab-content">
        <div class="form-group">
            <label for="title">Title (optional)</label>
            <input type="text" name="title" id="title" placeholder="e.g., New AI Agent Framework Released"
                   class="form-input">
        </div>
        <div class="form-group">
            <label for="text">Content / Description</label>
            <textarea name="text" id="text" rows="8" class="editor-textarea"
                      placeholder="Describe the topic, paste key points, or write a rough draft..."></textarea>
            <p class="hint">The more detail you provide, the better the generated posts will be.</p>
        </div>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary btn-lg" id="submit-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
            Generate Drafts
        </button>
        <a href="/" class="btn btn-secondary btn-lg">Cancel</a>
    </div>
</form>

<script>
function switchTab(tab) {
    document.getElementById('input_type').value = tab;
    document.querySelectorAll('.tab-btn').forEach(function(btn) { btn.classList.remove('active'); });
    event.target.classList.add('active');
    document.querySelectorAll('.tab-content').forEach(function(el) { el.classList.remove('active'); });
    document.getElementById('tab-' + tab).classList.add('active');
}

document.querySelector('.create-form').addEventListener('submit', function() {
    var btn = document.getElementById('submit-btn');
    btn.innerHTML = '<div class="spinner"></div> Generating...';
    btn.disabled = true;
});
</script>
{% endblock %}
